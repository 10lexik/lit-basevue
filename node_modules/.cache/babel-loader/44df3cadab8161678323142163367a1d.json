{"remainingRequest":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/babel-loader/lib/index.js!/Users/glarcher/Workspace/export/lit-basevue/node_modules/eslint-loader/index.js??ref--14-0!/Users/glarcher/Workspace/export/lit-basevue/src/js/directives/timer.js","dependencies":[{"path":"/Users/glarcher/Workspace/export/lit-basevue/src/js/directives/timer.js","mtime":1708360680000},{"path":"/Users/glarcher/Workspace/export/lit-basevue/babel.config.js","mtime":1708360680000},{"path":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/cache-loader/dist/cjs.js","mtime":1708364821923},{"path":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/babel-loader/lib/index.js","mtime":1708364822547},{"path":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/eslint-loader/index.js","mtime":1708364822051}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUvJzsKaW1wb3J0IGVudiBmcm9tICdAL2pzL2NvbmYvZGV0ZWN0RW52JzsKbGV0IGlzUmVkaXJlY3RpbmcgPSBmYWxzZTsKZnVuY3Rpb24gZ29Gb3IoaHJlZiwgdGFyZ2V0KSB7CiAgaWYgKGhyZWYgPT09ICdub1JlZGlyZWN0V2ViQXBwJykgewogICAgY29uc29sZS5sb2coc3RvcmUuc3RhdGUuZ2VuZXJhbC5hbGVydFBvcGluV2ViYXBwKTsKICAgIHN0b3JlLnN0YXRlLmdlbmVyYWwuYWxlcnRQb3BpbldlYmFwcCA9IHRydWU7CiAgICBjb25zb2xlLmxvZyhzdG9yZS5zdGF0ZS5nZW5lcmFsLmFsZXJ0UG9waW5XZWJhcHApOwogIH0gZWxzZSB7CiAgICBzd2l0Y2ggKHRhcmdldCkgewogICAgICBjYXNlICdfdG9wJzoKICAgICAgICB3aW5kb3cudG9wLmxvY2F0aW9uLmhyZWYgPSBocmVmOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdfcGFyZW50JzoKICAgICAgICB3aW5kb3cucGFyZW50LmxvY2F0aW9uLmhyZWYgPSBocmVmOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdfYmxhbmsnOgogICAgICAgIGlmICghZW52LmlzQXBwICYmICFlbnYuaXNJT1MpIHdpbmRvdy5vcGVuKGhyZWYpOyAvLyBObyB0YWJzIGluIEFwcCArIGlPUyBkb2VzIG5vdCBhbGxvdyB0YWJzIHRvIGJlIG9wZW5lZCB2aWEgSmF2YXNjcmlwdAogICAgICAgIGVsc2Ugd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjsKICAgIH0KICB9Cn0KZXhwb3J0IGNvbnN0IHRpbWVyID0gewogIGluc2VydGVkOiBlbGVtZW50ID0+IHsKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBjb25zdCByZWRpcmVjdGlvblBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlZGlyZWN0aW9uLXBvcHVwJyk7CiAgICAgIGNvbnN0IGhyZWYgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpOwogICAgICBjb25zdCB0YXJnZXQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGFyZ2V0Jyk7CiAgICAgIGNvbnN0IGhhc1ZhbGlkTGluayA9IGhyZWYgIT09IHVuZGVmaW5lZCAmJiBocmVmICE9PSAnIycgJiYgaHJlZiAhPT0gbnVsbDsKICAgICAgaWYgKGhhc1ZhbGlkTGluayAmJiAhaXNSZWRpcmVjdGluZykgewogICAgICAgIGlzUmVkaXJlY3RpbmcgPSB0cnVlOwoKICAgICAgICAvLyBDcmVhdGUgYSByYW5kb20gdGltZXIKICAgICAgICBjb25zdCByYW5kb20gPSBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMjAwMCk7CiAgICAgICAgY29uc3QgdGltZW91dEludGVydmFsID0gMjAwMCArIHJhbmRvbTsKCiAgICAgICAgLy8gU2hvdyB0aGUgcmVkaXJlY3Rpb24gcG9wdXAKICAgICAgICByZWRpcmVjdGlvblBvcHVwLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwoKICAgICAgICAvLyBSZWRpcmVjdHMgdGhlIHVzZXIgYWZ0ZXIgdGhlIHRpbWVyIGVuZHMKICAgICAgICBsZXQgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOwogICAgICAgICAgZ29Gb3IoaHJlZiwgdGFyZ2V0KTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICByZWRpcmVjdGlvblBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgICAgICAgICBpc1JlZGlyZWN0aW5nID0gZmFsc2U7CiAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0sIHRpbWVvdXRJbnRlcnZhbCk7CiAgICAgIH0KICAgIH0pOwogIH0KfTs="},{"version":3,"names":["store","env","isRedirecting","goFor","href","target","console","log","state","general","alertPopinWebapp","window","top","location","parent","isApp","isIOS","open","timer","inserted","element","addEventListener","e","preventDefault","redirectionPopup","document","querySelector","getAttribute","hasValidLink","undefined","random","parseInt","Math","timeoutInterval","classList","add","timeout","setTimeout","clearTimeout","remove"],"sources":["/Users/glarcher/Workspace/export/lit-basevue/src/js/directives/timer.js"],"sourcesContent":["'use strict'\n\nimport store from '@/store/'\nimport env from '@/js/conf/detectEnv'\n\nlet isRedirecting = false\n\nfunction goFor(href, target) {\n    if (href === 'noRedirectWebApp') {\n        console.log(store.state.general.alertPopinWebapp)\n        store.state.general.alertPopinWebapp = true\n        console.log(store.state.general.alertPopinWebapp)\n    } else {\n        switch (target) {\n        case '_top':\n            window.top.location.href = href\n            break\n        case '_parent':\n            window.parent.location.href = href\n            break\n        case '_blank':\n            if (!env.isApp && !env.isIOS) window.open(href) // No tabs in App + iOS does not allow tabs to be opened via Javascript\n            else window.location.href = href\n            break\n        default:\n            window.location.href = href\n        }\n    }\n}\n\nexport const timer = {\n    inserted: (element) => {\n        element.addEventListener('click', (e) => {\n            e.preventDefault()\n\n            const redirectionPopup = document.querySelector('.redirection-popup')\n            const href = element.getAttribute('href')\n            const target = element.getAttribute('target')\n            const hasValidLink = href !== undefined && href !== '#' && href !== null\n\n            if (hasValidLink && !isRedirecting) {\n                isRedirecting = true\n\n                // Create a random timer\n                const random = parseInt(Math.random() * 2000)\n                const timeoutInterval = 2000 + random\n\n                // Show the redirection popup\n                redirectionPopup.classList.add('active')\n\n                // Redirects the user after the timer ends\n                let timeout = setTimeout(() => {\n                    clearTimeout(timeout)\n                    goFor(href, target)\n\n                    setTimeout(() => {\n                        redirectionPopup.classList.remove('active')\n                        isRedirecting = false\n                    }, 500)\n                }, timeoutInterval)\n            }\n        })\n    }\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,OAAOA,KAAK,MAAM,UAAU;AAC5B,OAAOC,GAAG,MAAM,qBAAqB;AAErC,IAAIC,aAAa,GAAG,KAAK;AAEzB,SAASC,KAAKA,CAACC,IAAI,EAAEC,MAAM,EAAE;EACzB,IAAID,IAAI,KAAK,kBAAkB,EAAE;IAC7BE,OAAO,CAACC,GAAG,CAACP,KAAK,CAACQ,KAAK,CAACC,OAAO,CAACC,gBAAgB,CAAC;IACjDV,KAAK,CAACQ,KAAK,CAACC,OAAO,CAACC,gBAAgB,GAAG,IAAI;IAC3CJ,OAAO,CAACC,GAAG,CAACP,KAAK,CAACQ,KAAK,CAACC,OAAO,CAACC,gBAAgB,CAAC;EACrD,CAAC,MAAM;IACH,QAAQL,MAAM;MACd,KAAK,MAAM;QACPM,MAAM,CAACC,GAAG,CAACC,QAAQ,CAACT,IAAI,GAAGA,IAAI;QAC/B;MACJ,KAAK,SAAS;QACVO,MAAM,CAACG,MAAM,CAACD,QAAQ,CAACT,IAAI,GAAGA,IAAI;QAClC;MACJ,KAAK,QAAQ;QACT,IAAI,CAACH,GAAG,CAACc,KAAK,IAAI,CAACd,GAAG,CAACe,KAAK,EAAEL,MAAM,CAACM,IAAI,CAACb,IAAI,CAAC,EAAC;QAAA,KAC3CO,MAAM,CAACE,QAAQ,CAACT,IAAI,GAAGA,IAAI;QAChC;MACJ;QACIO,MAAM,CAACE,QAAQ,CAACT,IAAI,GAAGA,IAAI;IAC/B;EACJ;AACJ;AAEA,OAAO,MAAMc,KAAK,GAAG;EACjBC,QAAQ,EAAGC,OAAO,IAAK;IACnBA,OAAO,CAACC,gBAAgB,CAAC,OAAO,EAAGC,CAAC,IAAK;MACrCA,CAAC,CAACC,cAAc,CAAC,CAAC;MAElB,MAAMC,gBAAgB,GAAGC,QAAQ,CAACC,aAAa,CAAC,oBAAoB,CAAC;MACrE,MAAMtB,IAAI,GAAGgB,OAAO,CAACO,YAAY,CAAC,MAAM,CAAC;MACzC,MAAMtB,MAAM,GAAGe,OAAO,CAACO,YAAY,CAAC,QAAQ,CAAC;MAC7C,MAAMC,YAAY,GAAGxB,IAAI,KAAKyB,SAAS,IAAIzB,IAAI,KAAK,GAAG,IAAIA,IAAI,KAAK,IAAI;MAExE,IAAIwB,YAAY,IAAI,CAAC1B,aAAa,EAAE;QAChCA,aAAa,GAAG,IAAI;;QAEpB;QACA,MAAM4B,MAAM,GAAGC,QAAQ,CAACC,IAAI,CAACF,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC;QAC7C,MAAMG,eAAe,GAAG,IAAI,GAAGH,MAAM;;QAErC;QACAN,gBAAgB,CAACU,SAAS,CAACC,GAAG,CAAC,QAAQ,CAAC;;QAExC;QACA,IAAIC,OAAO,GAAGC,UAAU,CAAC,MAAM;UAC3BC,YAAY,CAACF,OAAO,CAAC;UACrBjC,KAAK,CAACC,IAAI,EAAEC,MAAM,CAAC;UAEnBgC,UAAU,CAAC,MAAM;YACbb,gBAAgB,CAACU,SAAS,CAACK,MAAM,CAAC,QAAQ,CAAC;YAC3CrC,aAAa,GAAG,KAAK;UACzB,CAAC,EAAE,GAAG,CAAC;QACX,CAAC,EAAE+B,eAAe,CAAC;MACvB;IACJ,CAAC,CAAC;EACN;AACJ,CAAC"}]}