{"remainingRequest":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/babel-loader/lib/index.js!/Users/glarcher/Workspace/export/lit-basevue/node_modules/eslint-loader/index.js??ref--14-0!/Users/glarcher/Workspace/export/lit-basevue/src/js/directives/loader.js","dependencies":[{"path":"/Users/glarcher/Workspace/export/lit-basevue/src/js/directives/loader.js","mtime":1708360680000},{"path":"/Users/glarcher/Workspace/export/lit-basevue/babel.config.js","mtime":1708360680000},{"path":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/cache-loader/dist/cjs.js","mtime":1708364821923},{"path":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/babel-loader/lib/index.js","mtime":1708364822547},{"path":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/eslint-loader/index.js","mtime":1708364822051}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5kZWxldGUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuaGFzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLnNpemUuanMiOwppbXBvcnQgZGV0ZWN0RW52IGZyb20gJ0AvanMvY29uZi9kZXRlY3RFbnYnOwppbXBvcnQgeyBnZXRQYXJlbnRCeUNsYXNzTmFtZSB9IGZyb20gJ0AvanMvdG9vbHMnOwpjb25zdCB2aWRlb3MgPSBbXTsKY29uc3QgaW5zZXJ0ZWRJbWFnZSA9IChpbWcsIGJpbmRpbmcsIHZub2RlKSA9PiB7CiAgLy8gV29ya2Fyb3VuZCBmb3IgaW1hZ2VzIGNhbGxlZCB3aXRoIHRoZSBJbWcgY29tcG9uZW50ICh2LWxvYWRlcjpuZXN0ZWQpCiAgY29uc3QgZWxlbWVudCA9IGJpbmRpbmcuYXJnID09PSAnbmVzdGVkJyA/IGltZy5wYXJlbnRFbGVtZW50IDogaW1nOwoKICAvLyBDb25kaXRpb25zIGZvciBsb2FkaW5nCiAgY29uc3QgbW9iT25seSA9IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2Itb25seScpOwogIGNvbnN0IGRlc2tPbmx5ID0gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rlc2t0b3Atb25seScpOwogIGNvbnN0IG5vTW9iID0gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ25vLW1vYicpOwogIGNvbnN0IG5vRGVzayA9IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCduby1kZXNrdG9wJyk7CiAgaWYgKG1vYk9ubHkgJiYgZGV0ZWN0RW52LmlzTW9iaWxlIHx8IGRlc2tPbmx5ICYmIGRldGVjdEVudi5pc0Rlc2t0b3AgfHwgbm9Nb2IgJiYgIWRldGVjdEVudi5pc01vYmlsZSB8fCBub0Rlc2sgJiYgIWRldGVjdEVudi5pc0Rlc2t0b3AgfHwgIW1vYk9ubHkgJiYgIWRlc2tPbmx5ICYmICFub01vYiAmJiAhbm9EZXNrKSB7CiAgICAvLyBJbmNyZWFzZSB0aGUgY291bnQgb2YgaW1hZ2VzIHRvIGJlIGxvYWRlZAogICAgdm5vZGUuY29udGV4dC4kc3RvcmUuZGlzcGF0Y2goJ2xvYWRlci9pbmNyZW1lbnRJbWdDb3VudCcpOwoKICAgIC8vIEFkZCBhbiBldmVudCB3aGVuIHRoZSBpbWFnZSBpcyBmdWxseSBsb2FkZWQKICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpOwogICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsKICAgICAgLy8gSW5jcmVhc2UgdGhlIGNvdW50IG9mIGxvYWRlZCBpbWFnZXMKICAgICAgdm5vZGUuY29udGV4dC4kc3RvcmUuZGlzcGF0Y2goJ2xvYWRlci9pbmNyZW1lbnRJbWdMb2FkZWQnKTsKICAgIH0pOwoKICAgIC8vIEluc2VydCB0aGUgaW1hZ2UgdG8gYSBmYWtlIERPTSB0byB0cmlnZ2VyIHRoZSAibG9hZCIgZXZlbnQKICAgIGltYWdlLnNyYyA9IGltZy5nZXRBdHRyaWJ1dGUoJ3NyYycpOwogIH0KfTsKY29uc3QgYmluZFZpZGVvID0gKHZpZGVvLCBiaW5kaW5nLCB2bm9kZSkgPT4gewogIC8vIFByZXZlbnQgbG9hZGluZyA/CiAgY29uc3QgcHJldmVudExvYWRpbmcgPSBiaW5kaW5nLnZhbHVlOwogIGlmIChwcmV2ZW50TG9hZGluZyA9PT0gdHJ1ZSkgewogICAgcmV0dXJuOwogIH0KICBjb25zdCBzcmMgPSB2aWRlby5nZXRBdHRyaWJ1dGUoJ3NyYycpOwoKICAvLyBQcmV2ZW50IG5hdGl2ZSB2aWRlbyBsb2FkaW5nIGFuZCBzdG9yZSB0aGUgc3JjIGluIGEgZGF0YS1hdHRyaWJ1dGUgdGVtcG9yYXJpbHkKICBpZiAoc3JjKSB7CiAgICB2aWRlby5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpOwogICAgdmlkZW8uc2V0QXR0cmlidXRlKCdkYXRhLXNyYycsIHNyYyk7CiAgICBpZiAodmlkZW9zLmluZGV4T2Yoc3JjKSA9PT0gLTEpIHsKICAgICAgLy8gQWRkIHRoZSB2aWRlbyB0byB0aGUgc3RvcmUKICAgICAgdmlkZW9zLnB1c2goc3JjKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEZsYWcgdGhlIHZpZGVvIGFzIGR1cGxpY2F0ZQogICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ2RhdGEtZHVwbGljYXRlJywgdHJ1ZSk7CiAgICB9CiAgfQp9Owpjb25zdCBpbnNlcnRlZFZpZGVvID0gKHZpZGVvLCBiaW5kaW5nLCB2bm9kZSkgPT4gewogIC8vIFdvcmthcm91bmQgZm9yIGltYWdlcyBjYWxsZWQgd2l0aCB0aGUgSW1nIGNvbXBvbmVudCAodi1sb2FkZXI6bmVzdGVkKQogIGNvbnN0IGVsZW1lbnQgPSBiaW5kaW5nLmFyZyA9PT0gJ25lc3RlZCcgPyBnZXRQYXJlbnRCeUNsYXNzTmFtZSh2aWRlbywgJ3ZpZGVvJykgOiB2aWRlbzsKCiAgLy8gQ29uZGl0aW9ucyBmb3IgbG9hZGluZwogIGNvbnN0IG1vYk9ubHkgPSBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnbW9iLW9ubHknKTsKICBjb25zdCBkZXNrT25seSA9IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZXNrdG9wLW9ubHknKTsKICBjb25zdCBub01vYiA9IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCduby1tb2InKTsKICBjb25zdCBub0Rlc2sgPSBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnbm8tZGVza3RvcCcpOwogIGlmIChtb2JPbmx5ICYmIGRldGVjdEVudi5pc01vYmlsZSB8fCBkZXNrT25seSAmJiBkZXRlY3RFbnYuaXNEZXNrdG9wIHx8IG5vTW9iICYmICFkZXRlY3RFbnYuaXNNb2JpbGUgfHwgbm9EZXNrICYmICFkZXRlY3RFbnYuaXNEZXNrdG9wIHx8ICFtb2JPbmx5ICYmICFkZXNrT25seSAmJiAhbm9Nb2IgJiYgIW5vRGVzaykgewogICAgLy8gUHJldmVudCBsb2FkaW5nIG9uIGR1cGxpY2F0ZSB2aWRlb3MKICAgIGlmICh2aWRlby5nZXRBdHRyaWJ1dGUoJ2RhdGEtZHVwbGljYXRlJykpIHJldHVybjsKICAgIGxldCBzcmMgPSB2aWRlby5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJyk7CiAgICBjb25zdCBpc0V4dGVybmFsVmlkZW8gPSB2aWRlby5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXh0c3JjJyk7CiAgICBpZiAoaXNFeHRlcm5hbFZpZGVvKSBzcmMgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7CiAgICBjb25zdCB2aWRlb1NpemUgPSBwYXJzZUludCh2aWRlby5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZScpKTsKICAgIC8vIFByZXZlbnQgbG9hZGluZyA/CiAgICBjb25zdCBwcmV2ZW50TG9hZGluZyA9IGJpbmRpbmcudmFsdWU7CiAgICBpZiAoIXByZXZlbnRMb2FkaW5nKSB2bm9kZS5jb250ZXh0LiRzdG9yZS5kaXNwYXRjaCgnbG9hZGVyL3JlZ2lzdGVyVmlkZW8nLCB7CiAgICAgIHNyYywKICAgICAgcHJvZ3Jlc3M6IDAKICAgIH0pOwoKICAgIC8vIElmIGxvY2FsIHZpZGVvCiAgICBpZiAoIWlzRXh0ZXJuYWxWaWRlbykgewogICAgICAvLyBDcmVhdGUgYW4gSFRUUCByZXF1ZXN0IHRvIGRvd25sb2FkIHRoZSB2aWRlbwogICAgICBsZXQgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHJlcS5vcGVuKCdHRVQnLCBzcmMsIHRydWUpOwogICAgICBpZiAoIWlzRXh0ZXJuYWxWaWRlbykgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAncHVibGljLCBtYXgtYWdlPTMxNTM2MDAwJyk7CiAgICAgIHJlcS5yZXNwb25zZVR5cGUgPSAnYmxvYic7CgogICAgICAvLyBQcm9ncmVzcyBjYWxjdWxhdGlvbgogICAgICBsZXQgcHJvZ3Jlc3MgPSAwOwogICAgICByZXEuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBldmVudCA9PiB7CiAgICAgICAgaWYgKGV2ZW50Lmxlbmd0aENvbXB1dGFibGUpIHsKICAgICAgICAgIHByb2dyZXNzID0gZXZlbnQubG9hZGVkIC8gZXZlbnQudG90YWwgKiAxMDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHByb2dyZXNzID0gZXZlbnQubG9hZGVkIC8gdmlkZW9TaXplICogMTAwOwogICAgICAgIH0KICAgICAgfSwgZmFsc2UpOwoKICAgICAgLy8gU3RvcmUgdXBkYXRlIChzZXRJbnRlcnZhbCBpcyB1c2VkIGZvciBwZXJmb3JtYW5jZSkKICAgICAgaWYgKCFwcmV2ZW50TG9hZGluZykgewogICAgICAgIGxldCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgIHZub2RlLmNvbnRleHQuJHN0b3JlLmRpc3BhdGNoKCdsb2FkZXIvcHJvZ3Jlc3NWaWRlbycsIHsKICAgICAgICAgICAgc3JjLAogICAgICAgICAgICBwcm9ncmVzcwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAocHJvZ3Jlc3MgPj0gMTAwKSBjbGVhckludGVydmFsKGludGVydmFsKTsKICAgICAgICB9LCAyMDApOwogICAgICB9CgogICAgICAvLyBXaGVuIHRoZSB2aWRlbyBpcyBmdWxseSBsb2FkZWQKICAgICAgcmVxLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSA0ICYmIHRoaXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHByb2dyZXNzID0gMTAwOwogICAgICAgICAgdm5vZGUuY29udGV4dC4kc3RvcmUuZGlzcGF0Y2goJ2xvYWRlci9wcm9ncmVzc1ZpZGVvJywgewogICAgICAgICAgICBzcmMsCiAgICAgICAgICAgIHByb2dyZXNzCiAgICAgICAgICB9KTsKICAgICAgICAgIGxldCBibG9iRGF0YSA9IHRoaXMucmVzcG9uc2U7CiAgICAgICAgICBsZXQgb2JqZWN0VVJMID0gZGV0ZWN0RW52LmlzQXBwICYmIGRldGVjdEVudi5pc0lPUyA/IHNyYyA6IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYkRhdGEpOwogICAgICAgICAgY29uc3Qgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnU09VUkNFJyk7CgogICAgICAgICAgLy8gU2V0IHRoZSBtZWRpYSBhcyBzb3VyY2Ugb24gdGhlIHZpZGVvIGVsZW1lbnRzCiAgICAgICAgICBzb3VyY2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBvYmplY3RVUkwpOwogICAgICAgICAgdmlkZW8uYXBwZW5kQ2hpbGQoc291cmNlKTsKICAgICAgICAgIHZpZGVvLmxvYWQoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyBFcnJvcgogICAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdWaWRlbyBsb2FkaW5nIGVycm9yOicsIHNyYyk7CiAgICAgIH07CgogICAgICAvLyBMb2FkIHRoZSB2aWRlbwogICAgICByZXEuc2VuZCgpOwogICAgfQogIH0KfTsKZXhwb3J0IGNvbnN0IGxvYWRlciA9IHsKICBiaW5kOiAoZWxlbWVudCwgYmluZGluZywgdm5vZGUpID0+IHsKICAgIHN3aXRjaCAoZWxlbWVudC5ub2RlTmFtZSkgewogICAgICBjYXNlICdWSURFTyc6CiAgICAgICAgYmluZFZpZGVvKGVsZW1lbnQsIGJpbmRpbmcsIHZub2RlKTsKICAgICAgICBicmVhazsKICAgIH0KICB9LAogIGluc2VydGVkOiAoZWxlbWVudCwgYmluZGluZywgdm5vZGUpID0+IHsKICAgIHN3aXRjaCAoZWxlbWVudC5ub2RlTmFtZSkgewogICAgICBjYXNlICdJTUcnOgogICAgICAgIGluc2VydGVkSW1hZ2UoZWxlbWVudCwgYmluZGluZywgdm5vZGUpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdWSURFTyc6CiAgICAgICAgaW5zZXJ0ZWRWaWRlbyhlbGVtZW50LCBiaW5kaW5nLCB2bm9kZSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["detectEnv","getParentByClassName","videos","insertedImage","img","binding","vnode","element","arg","parentElement","mobOnly","classList","contains","deskOnly","noMob","noDesk","isMobile","isDesktop","context","$store","dispatch","image","Image","addEventListener","src","getAttribute","bindVideo","video","preventLoading","value","removeAttribute","setAttribute","indexOf","push","insertedVideo","isExternalVideo","videoSize","parseInt","progress","req","XMLHttpRequest","open","setRequestHeader","responseType","event","lengthComputable","loaded","total","interval","setInterval","clearInterval","onload","readyState","status","blobData","response","objectURL","isApp","isIOS","URL","createObjectURL","source","document","createElement","appendChild","load","onerror","console","error","send","loader","bind","nodeName","inserted"],"sources":["/Users/glarcher/Workspace/export/lit-basevue/src/js/directives/loader.js"],"sourcesContent":["'use strict'\n\nimport detectEnv from '@/js/conf/detectEnv'\nimport { getParentByClassName } from '@/js/tools'\n\nconst videos = []\n\nconst insertedImage = (img, binding, vnode) => {\n    // Workaround for images called with the Img component (v-loader:nested)\n    const element = binding.arg === 'nested' ? img.parentElement : img\n\n    // Conditions for loading\n    const mobOnly = element.classList.contains('mob-only')\n    const deskOnly = element.classList.contains('desktop-only')\n    const noMob = element.classList.contains('no-mob')\n    const noDesk = element.classList.contains('no-desktop')\n\n    if (\n        (mobOnly && detectEnv.isMobile) ||\n        (deskOnly && detectEnv.isDesktop) ||\n        (noMob && !detectEnv.isMobile) ||\n        (noDesk && !detectEnv.isDesktop) ||\n        (!mobOnly && !deskOnly && !noMob && !noDesk)\n    ) {\n        // Increase the count of images to be loaded\n        vnode.context.$store.dispatch('loader/incrementImgCount')\n\n        // Add an event when the image is fully loaded\n        let image = new Image()\n        image.addEventListener('load', () => {\n            // Increase the count of loaded images\n            vnode.context.$store.dispatch('loader/incrementImgLoaded')\n        })\n\n        // Insert the image to a fake DOM to trigger the \"load\" event\n        image.src = img.getAttribute('src')\n    }\n}\n\nconst bindVideo = (video, binding, vnode) => {\n    // Prevent loading ?\n    const preventLoading = binding.value\n    if (preventLoading === true) {\n        return\n    }\n\n    const src = video.getAttribute('src')\n\n    // Prevent native video loading and store the src in a data-attribute temporarily\n    if (src) {\n        video.removeAttribute('src')\n        video.setAttribute('data-src', src)\n\n        if (videos.indexOf(src) === -1) {\n            // Add the video to the store\n            videos.push(src)\n        } else {\n            // Flag the video as duplicate\n            video.setAttribute('data-duplicate', true)\n        }\n    }\n}\n\nconst insertedVideo = (video, binding, vnode) => {\n    // Workaround for images called with the Img component (v-loader:nested)\n    const element = binding.arg === 'nested' ? getParentByClassName(video, 'video') : video\n\n    // Conditions for loading\n    const mobOnly = element.classList.contains('mob-only')\n    const deskOnly = element.classList.contains('desktop-only')\n    const noMob = element.classList.contains('no-mob')\n    const noDesk = element.classList.contains('no-desktop')\n\n    if (\n        (mobOnly && detectEnv.isMobile) ||\n        (deskOnly && detectEnv.isDesktop) ||\n        (noMob && !detectEnv.isMobile) ||\n        (noDesk && !detectEnv.isDesktop) ||\n        (!mobOnly && !deskOnly && !noMob && !noDesk)\n    ) {\n        // Prevent loading on duplicate videos\n        if (video.getAttribute('data-duplicate')) return\n\n        let src = video.getAttribute('data-src')\n        const isExternalVideo = video.getAttribute('data-extsrc')\n        if (isExternalVideo) src = element.getAttribute('data-name')\n        const videoSize = parseInt(video.getAttribute('data-size'))\n        // Prevent loading ?\n        const preventLoading = binding.value\n        if (!preventLoading) vnode.context.$store.dispatch('loader/registerVideo', { src, progress: 0 })\n\n        // If local video\n        if (!isExternalVideo) {\n            // Create an HTTP request to download the video\n            let req = new XMLHttpRequest()\n            req.open('GET', src, true)\n            if (!isExternalVideo) req.setRequestHeader('Cache-Control', 'public, max-age=31536000')\n            req.responseType = 'blob'\n\n            // Progress calculation\n            let progress = 0\n            req.addEventListener('progress', (event) => {\n                if (event.lengthComputable) {\n                    progress = (event.loaded / event.total) * 100\n                } else {\n                    progress = (event.loaded / videoSize) * 100\n                }\n            }, false)\n\n            // Store update (setInterval is used for performance)\n            if (!preventLoading) {\n                let interval = setInterval(() => {\n                    vnode.context.$store.dispatch('loader/progressVideo', { src, progress })\n                    if (progress >= 100) clearInterval(interval)\n                }, 200)\n            }\n\n            // When the video is fully loaded\n            req.onload = function() {\n                if (this.readyState === 4 && this.status === 200) {\n                    progress = 100\n                    vnode.context.$store.dispatch('loader/progressVideo', { src, progress })\n\n                    let blobData = this.response\n                    let objectURL = (detectEnv.isApp && detectEnv.isIOS) ? src : URL.createObjectURL(blobData)\n                    const source = document.createElement('SOURCE')\n\n                    // Set the media as source on the video elements\n                    source.setAttribute('src', objectURL)\n                    video.appendChild(source)\n                    video.load()\n                }\n            }\n\n            // Error\n            req.onerror = function() {\n                console.error('Video loading error:', src)\n            }\n\n            // Load the video\n            req.send()\n        }\n    }\n}\n\nexport const loader = {\n    bind: (element, binding, vnode) => {\n        switch (element.nodeName) {\n        case 'VIDEO':\n            bindVideo(element, binding, vnode)\n            break\n        }\n    },\n    inserted: (element, binding, vnode) => {\n        switch (element.nodeName) {\n        case 'IMG':\n            insertedImage(element, binding, vnode)\n            break\n        case 'VIDEO':\n            insertedVideo(element, binding, vnode)\n            break\n        }\n    }\n}\n"],"mappings":"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"}]}