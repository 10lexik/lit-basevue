{"remainingRequest":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/babel-loader/lib/index.js!/Users/glarcher/Workspace/export/lit-basevue/node_modules/eslint-loader/index.js??ref--14-0!/Users/glarcher/Workspace/export/lit-basevue/src/store/modules/loader.js","dependencies":[{"path":"/Users/glarcher/Workspace/export/lit-basevue/src/store/modules/loader.js","mtime":1708360680000},{"path":"/Users/glarcher/Workspace/export/lit-basevue/babel.config.js","mtime":1708360680000},{"path":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/cache-loader/dist/cjs.js","mtime":1708364821923},{"path":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/babel-loader/lib/index.js","mtime":1708364822547},{"path":"/Users/glarcher/Workspace/export/lit-basevue/node_modules/eslint-loader/index.js","mtime":1708364822051}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmNvbnN0IHN0YXRlID0gKCkgPT4gKHsKICBpbWdDb3VudDogMCwKICBpbWdMb2FkZWQ6IDAsCiAgdmlkZW9zOiBbXSwKICBsb2FkZWQ6IGZhbHNlLAogIGxvYWRpbmdUaW1lOiAwLAogIGFwaUxvYWRpbmdUaW1lOiAwLAogIGlzQ29uc2VudDogbnVsbAp9KTsKY29uc3QgZ2V0dGVycyA9IHsKICBpbWdQcm9ncmVzczogc3RhdGUgPT4gc3RhdGUuaW1nTG9hZGVkIC8gc3RhdGUuaW1nQ291bnQgKiAxMDAsCiAgdmlkZW9Qcm9ncmVzczogc3RhdGUgPT4gewogICAgbGV0IHZpZGVvUHJvZ3Jlc3MgPSAwOwogICAgaWYgKHN0YXRlLnZpZGVvcy5sZW5ndGggPiAwKSB7CiAgICAgIGxldCB2aWRlb1Byb2dyZXNzU3VtID0gc3RhdGUudmlkZW9zLm1hcCh2ID0+IHYucHJvZ3Jlc3MpLnJlZHVjZSgoc3VtLCB2YWx1ZSkgPT4gc3VtICsgdmFsdWUpOwogICAgICB2aWRlb1Byb2dyZXNzID0gdmlkZW9Qcm9ncmVzc1N1bSAvIHN0YXRlLnZpZGVvcy5sZW5ndGg7CiAgICB9CiAgICByZXR1cm4gdmlkZW9Qcm9ncmVzczsKICB9LAogIHByb2dyZXNzOiAoc3RhdGUsIGdldHRlcnMpID0+IHN0YXRlLnZpZGVvcy5sZW5ndGggPiAwID8gKGdldHRlcnMuaW1nUHJvZ3Jlc3MgKyBnZXR0ZXJzLnZpZGVvUHJvZ3Jlc3MpIC8gMiA6IGdldHRlcnMuaW1nUHJvZ3Jlc3MsCiAgaXNMb2FkZWQ6IChzdGF0ZSwgZ2V0dGVycykgPT4gewogICAgaWYgKCFzdGF0ZS5sb2FkZWQgJiYgZ2V0dGVycy5wcm9ncmVzcyA+PSAxMDApIHN0YXRlLmxvYWRlZCA9IHRydWU7CiAgICByZXR1cm4gZ2V0dGVycy5wcm9ncmVzcyA+PSAxMDAgfHwgc3RhdGUubG9hZGVkOwogIH0sCiAgaXNDb25zZW50TG9hZGVkOiBzdGF0ZSA9PiBzdGF0ZS5pc0NvbnNlbnQgPT0gbnVsbCB8fCBzdGF0ZS5pc0NvbnNlbnQsCiAgbG9hZGluZ0RhdGE6IHN0YXRlID0+ICh7CiAgICBsb2FkaW5nVGltZTogc3RhdGUubG9hZGluZ1RpbWUsCiAgICBhcGlMb2FkaW5nVGltZTogc3RhdGUuYXBpTG9hZGluZ1RpbWUsCiAgICBpbWdDb3VudDogc3RhdGUuaW1nQ291bnQsCiAgICB2aWRlb3NDb3VudDogc3RhdGUudmlkZW9zLmxlbmd0aAogIH0pLAogIG5iQXNzZXRzOiBzdGF0ZSA9PiB7CiAgICBsZXQgcmVzID0gYGltYWdlczogJHtzdGF0ZS5pbWdMb2FkZWR9LyR7c3RhdGUuaW1nQ291bnR9YDsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUudmlkZW9zLmxlbmd0aDsgaSsrKSB7CiAgICAgIHJlcyArPSBgIHwgJHtzdGF0ZS52aWRlb3NbaV0uc3JjfSA6ICR7c3RhdGUudmlkZW9zW2ldLnByb2dyZXNzfSVgOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9LAogIGlzQ29uc2VudDogc3RhdGUgPT4gc3RhdGUuaXNDb25zZW50Cn07CmNvbnN0IGFjdGlvbnMgPSB7CiAgaW5jcmVtZW50SW1nQ291bnQ6IGNvbnRleHQgPT4gY29udGV4dC5jb21taXQoJ2luY3JlbWVudEltZ0NvdW50JyksCiAgaW5jcmVtZW50SW1nTG9hZGVkOiBjb250ZXh0ID0+IGNvbnRleHQuY29tbWl0KCdpbmNyZW1lbnRJbWdMb2FkZWQnKSwKICByZWdpc3RlclZpZGVvOiAoY29udGV4dCwgcGF5bG9hZCkgPT4gY29udGV4dC5jb21taXQoJ3JlZ2lzdGVyVmlkZW8nLCBwYXlsb2FkKSwKICBwcm9ncmVzc1ZpZGVvOiAoY29udGV4dCwgcGF5bG9hZCkgPT4gY29udGV4dC5jb21taXQoJ3Byb2dyZXNzVmlkZW8nLCBwYXlsb2FkKSwKICBzZXRMb2FkaW5nVGltZTogKGNvbnRleHQsIHBheWxvYWQpID0+IGNvbnRleHQuY29tbWl0KCdzZXRMb2FkaW5nVGltZScsIHBheWxvYWQpLAogIHNldENvbnNlbnQ6IChjb250ZXh0LCBwYXlsb2FkKSA9PiBjb250ZXh0LmNvbW1pdCgnc2V0Q29uc2VudCcsIHBheWxvYWQpCn07CmNvbnN0IG11dGF0aW9ucyA9IHsKICBpbmNyZW1lbnRJbWdDb3VudDogc3RhdGUgPT4gc3RhdGUuaW1nQ291bnQrKywKICBpbmNyZW1lbnRJbWdMb2FkZWQ6IHN0YXRlID0+IHN0YXRlLmltZ0xvYWRlZCsrLAogIHJlZ2lzdGVyVmlkZW86IChzdGF0ZSwgcGF5bG9hZCkgPT4gc3RhdGUudmlkZW9zLnB1c2gocGF5bG9hZCksCiAgcHJvZ3Jlc3NWaWRlbzogKHN0YXRlLCBwYXlsb2FkKSA9PiB7CiAgICBsZXQgdmlkZW9JbmRleCA9IHN0YXRlLnZpZGVvcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLnNyYyA9PT0gcGF5bG9hZC5zcmMpOwogICAgc3RhdGUudmlkZW9zW3ZpZGVvSW5kZXhdLnByb2dyZXNzID0gcGF5bG9hZC5wcm9ncmVzczsKICB9LAogIHNldExvYWRpbmdUaW1lOiAoc3RhdGUsIHBheWxvYWQpID0+IHsKICAgIHN0YXRlLmxvYWRpbmdUaW1lID0gcGF5bG9hZDsKICB9LAogIHNldENvbnNlbnQ6IChzdGF0ZSwgcGF5bG9hZCkgPT4gc3RhdGUuaXNDb25zZW50ID0gcGF5bG9hZAp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZSwKICBnZXR0ZXJzLAogIGFjdGlvbnMsCiAgbXV0YXRpb25zCn07"},{"version":3,"names":["state","imgCount","imgLoaded","videos","loaded","loadingTime","apiLoadingTime","isConsent","getters","imgProgress","videoProgress","length","videoProgressSum","map","v","progress","reduce","sum","value","isLoaded","isConsentLoaded","loadingData","videosCount","nbAssets","res","i","src","actions","incrementImgCount","context","commit","incrementImgLoaded","registerVideo","payload","progressVideo","setLoadingTime","setConsent","mutations","push","videoIndex","findIndex","item","namespaced"],"sources":["/Users/glarcher/Workspace/export/lit-basevue/src/store/modules/loader.js"],"sourcesContent":["'use strict'\n\nconst state = () => ({\n    imgCount: 0,\n    imgLoaded: 0,\n    videos: [],\n    loaded: false,\n    loadingTime: 0,\n    apiLoadingTime: 0,\n    isConsent: null\n})\n\nconst getters = {\n    imgProgress: state => (state.imgLoaded / state.imgCount) * 100,\n    videoProgress: state => {\n        let videoProgress = 0\n\n        if (state.videos.length > 0) {\n            let videoProgressSum = state.videos\n                .map(v => v.progress)\n                .reduce((sum, value) => sum + value)\n            videoProgress = videoProgressSum / state.videos.length\n        }\n\n        return videoProgress\n    },\n    progress: (state, getters) => state.videos.length > 0 ? (getters.imgProgress + getters.videoProgress) / 2 : getters.imgProgress,\n    isLoaded: (state, getters) => {\n        if (!state.loaded && getters.progress >= 100) state.loaded = true\n        return (getters.progress >= 100 || state.loaded)\n    },\n    isConsentLoaded: (state) => (state.isConsent == null || state.isConsent),\n    loadingData: (state) => ({\n        loadingTime: state.loadingTime,\n        apiLoadingTime: state.apiLoadingTime,\n        imgCount: state.imgCount,\n        videosCount: state.videos.length\n    }),\n    nbAssets: (state) => {\n        let res = `images: ${state.imgLoaded}/${state.imgCount}`\n        for (let i = 0; i < state.videos.length; i++) {\n            res += ` | ${state.videos[i].src} : ${state.videos[i].progress}%`\n        }\n        return res\n    },\n    isConsent: (state) => state.isConsent\n}\n\nconst actions = {\n    incrementImgCount: context => context.commit('incrementImgCount'),\n    incrementImgLoaded: context => context.commit('incrementImgLoaded'),\n    registerVideo: (context, payload) => context.commit('registerVideo', payload),\n    progressVideo: (context, payload) => context.commit('progressVideo', payload),\n    setLoadingTime: (context, payload) => context.commit('setLoadingTime', payload),\n    setConsent: (context, payload) => context.commit('setConsent', payload)\n}\n\nconst mutations = {\n    incrementImgCount: state => state.imgCount++,\n    incrementImgLoaded: state => state.imgLoaded++,\n    registerVideo: (state, payload) => state.videos.push(payload),\n    progressVideo: (state, payload) => {\n        let videoIndex = state.videos.findIndex(item => item.src === payload.src)\n        state.videos[videoIndex].progress = payload.progress\n    },\n    setLoadingTime: (state, payload) => {\n        state.loadingTime = payload\n    },\n    setConsent: (state, payload) => (state.isConsent = payload)\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n"],"mappings":"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"}]}